apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'jetty'

//apply plugin: 'eclipse-wtp'
apply plugin: 'idea'

sourceCompatibility = 1.6
targetCompatibility = 1.6

repositories {
    mavenCentral()
}

//war {
//  baseName = 'demo'
//  version =  '0.0.1-SNAPSHOT'
//}

dependencies {
    compile 'org.slf4j:slf4j-api:1.7.5'
    compile "javax.ws.rs:jsr311-api:1.1.1"

    compile 'com.sun.jersey:jersey-server:1.13'
    compile 'com.sun.jersey:jersey-core:1.13'
    compile 'com.sun.jersey:jersey-servlet:1.13'

    testCompile "junit:junit:4.11"
}

def HTTP_PORT = System.env.PORT?.trim()
jettyRun {
  if (HTTP_PORT) {
    httpPort = HTTP_PORT.toInteger()
  }
}

task stage(dependsOn: ['clean', 'jettyRun'])
